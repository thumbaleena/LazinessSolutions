@using Microsoft.AspNet.Identity
@model Lazybones.Models.Job
<script>
    function commentsDisplay() {
        document.getElementById("comments").style.display = "inline";
    }
    function commentsHide() {
        document.getElementById("comments").style.display = "none";
    }
</script>
@using (Html.BeginForm())
{
    @Html.HiddenFor(model => model.ID)
    <h4>@Html.DisplayFor(model => model.Title)</h4>
    <hr />
    if (Model.Poster != User.Identity.GetUserName() && Model.Getter == null)
    {
        <a href="SetGetter?ID=@Model.ID" class="btn btn-info" role="button" style="float: right;">Take this Gig</a>
    }
    if (((Model.Poster == User.Identity.GetUserName()) || (Model.Getter == User.Identity.GetUserName())) && (Model.Getter != null) && (Model.Status == "Assigned"))
    {
        <a href="MarkComplete?ID=@Model.ID" class="btn btn-info" role="button" style="float: right;">Mark as Complete</a>
    }
    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-6" style="padding-left: 50px;">
                <div class="row"><strong>Description: &nbsp;</strong> @Html.DisplayFor(model => model.Description)</div>
                <div class="row"><strong>Category: &nbsp;</strong> @Html.DisplayFor(model => model.Category)</div>
                <div class="row"><strong>Flat Rate Pay: &nbsp;</strong> $ @Html.DisplayFor(model => model.Pay)</div>
                <div class="row"><strong>Starts: &nbsp;</strong> @Html.DisplayFor(model => model.Start_Time_Date)</div>
                <div class="row"><strong>Expires: &nbsp;</strong> @Html.DisplayFor(model => model.Expirey_Time_Date)</div>
                <div class="row"><strong>Address: &nbsp;</strong> @Html.DisplayFor(model => model.Address)</div>
                <div class="row"><strong>City: &nbsp;</strong> @Html.DisplayFor(model => model.City)</div>
                <div class="row"><strong>State: &nbsp;</strong> @Html.DisplayFor(model => model.State)</div>
                <div class="row"><strong>Zip: &nbsp;</strong> @Html.DisplayFor(model => model.Zip)</div> <br />
                <div class="row" style="text-align: center;"><strong>Poster's preferred contact method:</strong></div>
                <div class="row">
                    <div class="col-sm-4">
                        <div class="row">
                            Call
                        </div>
                        <div class="row">@Html.DisplayFor(model => model.Contact_By_Phone)</div>
                    </div>
                    <div class="col-sm-4">
                        <div class="row">
                            Text
                        </div>
                        <div class="row">@Html.DisplayFor(model => model.Contact_By_Text)</div>
                    </div>
                    <div class="col-sm-4">
                        <div class="row">
                            Email
                        </div>
                        <div class="row">@Html.DisplayFor(model => model.Contact_By_Email)</div>
                    </div>
                </div><br />
                    <div class="row">
                        @if (Model.Poster == User.Identity.GetUserName() || ViewBag.isAdmin)
                        {
                            @Html.ActionLink("Edit Gig Details", "Edit", new { id = Model.ID })
                            <br />
                        }
                        @if (((Model.Status == "Assigned") || (Model.Status == "Created")) && (Model.Poster == User.Identity.GetUserName()))
                        {
                            <a href="Delete?ID=@Model.ID">Delete Gig</a> <br /> }
                        @Html.ActionLink("Back to List", "Search")
                    </div>
                </div>
                <div class="col-sm-6">
                    <div class="row"><br /><strong>Status: &nbsp;</strong> @Html.DisplayFor(model => model.Status)</div>
                    <div class="row"><strong>Date Completed or Expired: &nbsp;</strong> @Html.DisplayFor(model => model.Date_Completed)</div>
                    <div class="row">
                        <strong>Payment Complete? &nbsp;</strong> @Html.DisplayFor(model => model.Payment_Complete)
                    </div>
                    <div class="row"><strong>Posted By: &nbsp;</strong> @Html.DisplayFor(model => model.Poster)</div>
                    <div class="row">
                        <strong>Assigned To: &nbsp;</strong> @Html.DisplayFor(model => model.Getter)
                        <img src="http://downloadicons.net/sites/default/files/badge-icon-85756.png" width="35px" /> @Html.DisplayFor(model => model.Getter_Badges)
                    </div>
                    <div class="row">
                        <input type="button" class="btn" onclick="commentsDisplay()" value="Add a Comment">
                        <div id="comments" style="display: none;">
                            <br /> <br />
                            <div>@Html.TextAreaFor(model => model.Comments, new { @style = "width: 80%;" })</div>
                            <div style="float: right; padding-right: 120px;">
                                <input type="submit" value="Save" style="background-color: #FFF;" class="btn btn-default" /> &nbsp; <input type="button" class="btn" onclick="commentsHide()" value="Nevermind">
                            </div><br />
                            <div>
                                <br />
                                <strong>Comments History:</strong> <br />
                                @Html.DisplayFor(model => model.Comment_History)
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        if (Model.Payment_Complete == false & Model.Poster == User.Identity.GetUserName())
        {
        <br />
        <a href="https://venmo.com/?txn=pay&audience=private&recipients=@(Model.Getter)&amount=@(Model.Pay)&note=@(Model.Title)" target="_blank" class="btn" style="font-size: large; float: right; padding-right: 50px;"><img src="http://i.imgur.com/4WjiVhY.png" /> Send Payment with Venmo</a>
        }
        <br />
        }
